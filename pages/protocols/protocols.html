<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>终端管理</title>
		<link rel="stylesheet" href="../../css/reset.css" />
		<link rel="stylesheet" href="../../css/main.css" />
		<link rel="stylesheet" href="../../css/data-container.css" />		<link rel="stylesheet" href="../../css/DateTimePicker.css" />		<link rel="shortcut icon" type="image/x-icon" href="../../img/nm.ico" media="screen" />
		<style>			.data-container-parts{				width: 14%;			}		</style>
	</head>
	<body>
		<header>
			<div class="title">后台国内销售业务员系统</div>
			<img src="../../img/quit.png" />
			<p>Hello，<a id="name"></a></p>
		</header>
		<div class="content">
			<div class="content-left">
				<ul>
					<li id="agreement" class="active"><a href="protocols.html">终端管理</a></li>
					<li id="order"><a href="../deliveryNotes/deliveryNotes.html">订单管理</a></li>
					<li id="visit"><a href="../visit/visit.html">未开发终端管理</a></li>					<li id="product"><a href="../product/products.html">产品管理</a></li>
					<li id="user"><a href="../user/user.html">人员管理</a></li>
				</ul>
			</div>
			<div class="content-right">				<div class="navs">					<div class="search2">						<button class="search-btn3">搜索</button>						<input class="search-input search-input2 search-input33" type="text" placeholder="结束日期" data-field="date" readonly>						<input class="search-input search-input2 search-input3" type="text" placeholder="开始日期" data-field="date" readonly>												<div class="clear"></div>					</div>										<p class="navs-toggle">所有业务员信息<a class="toggle"></a></p>					<div class="navs-container">						<div class="navs-part  all-navs-part">							<p class="navs-part-name">全部</p>							<p class="navs-part-company">&nbsp;</p>							<div>								<div class="navs-part-left">									<p>客户总计:</p>								</div>								<div class="navs-part-right">									<p id="all-customer">30</p>								</div>								<div class="clear"></div>							</div>							<div>								<div class="navs-part-left">									<p>协议总计:</p>								</div>								<div class="navs-part-right">									<p id="all-protocol">30</p>								</div>								<div class="clear"></div>							</div>						</div>								<div class="clear"></div>					</div>									</div>				<div class="main-container" style="display: none;">					<div class="search">						<button class="search-btn">搜索</button>						<input class="search-input search-input22" type="text" placeholder="结束日期" data-field="date" readonly>						<input class="search-input search-input2" type="text" placeholder="开始日期" data-field="date" readonly>								<input class="search-input search-input3" readonly="" type="text" placeholder="按业务员查找" />						<input class="search-input search-input1" type="text" placeholder="按客户查找" />						<div class="clear"></div>						</div>					<div class="data-container" id="data-container">						<div class="data-container-part data-container-part2 data-container-title">							<div class="data-container-parts">编号</div>							<div class="data-container-parts">业务员</div>														<div class="data-container-parts">客户</div>							<div class="data-container-parts">客户电话</div>							<div class="data-container-parts">客户地址</div>							<div class="data-container-parts">日期</div>							<div class="data-container-parts">操作</div>							<div class="clear"></div>						</div>					</div>					<div class="data-container">						<div class="data-container-part data-container-title">							<div class="data-container-parts">总计协议:</div>							<div class="data-container-parts allProtocol"></div>							<div class="data-container-parts">&nbsp;</div>							<div class="data-container-parts">&nbsp;</div>							<div class="data-container-parts allUser"></div>							<div class="clear"></div>						</div>					</div>					<div class="fenye">						<div class="hide fenye_customerName"></div>						<ul>							<ul>								<div class="prev">首页</div>								<li class="liActive">1</li>								<li>2</li>								<li>3</li>								<div class="next">尾页</div>							</ul>						</ul>					</div>					</div>						
			</div>
			<div class="clear"></div>
		</div>		<div class="users">			<div class="user-part userAll" data-userId="">全部</div>			<div class="clear"></div>		</div>		<div class="users-shadow"></div>		<div id="dtBox"></div>
	</body>	
	<script type="text/javascript" src="../../js/jquery-3.2.1.js" ></script>
	<script type="text/javascript" src="../../js/url_path.js" ></script>
	<script type="text/javascript" src="../../js/main.js"></script>	<script type="text/javascript" src="../../js/onload.js" ></script>	<script type="text/javascript" src="../../js/DateTimePicker.js" ></script>	<script type="text/javascript">					$(document).ready(function()			{				$("#dtBox").DateTimePicker({									isPopup: false								});			});			</script>
	<script>
		$(function(){
			var page = "1";
			var num = "10";
			onloadProtocol(page,num);			onloadonloadProtocolUsers(page,num);			onloadDeliveryNote(page,num)			$(".fenye").on("click","li",function(){				var page = fenye(this);				var dataArrar={};				dataArrar.page=page;				dataArrar.num=num;				dataArrar.type="1"				if($(".fenye").data("userId")!=="" && $(".fenye").data("userId")!=="undefined"){					dataArrar.userId = $(".fenye").data("userId");				}				if($(".fenye_customerName").text()!=="" && $(".fenye_customerName").text()!=="undefined"){					dataArrar.customerName = $(".fenye_customerName").text()				}				$.ajax({					type:"post",					url:url_path+"/getProtocol",					data:dataArrar,					dataType:"json",					success:function(data){						protocols_success(data);					},					error:function(){}				});			});			$(".prev").click(function(){				var page = "1";				var dataArrar={};				dataArrar.page=page;				dataArrar.num=num;				dataArrar.type="1"				if($(".fenye").data("userId")!=="" && $(".fenye").data("userId")!=="undefined"){					dataArrar.userId = $(".fenye").data("userId");				}				if($(".fenye_customerName").text()!=="" && $(".fenye_customerName").text()!=="undefined"){					dataArrar.customerName = $(".fenye_customerName").text()				}				$.ajax({					type:"post",					url:url_path+"/getProtocol",					data:dataArrar,					dataType:"json",					success:function(data){						protocols_success(data);					},					error:function(){}				});			})			$(".next").click(function(){				var allProtocol = parseInt($(".allProtocol").text());								var page = String(Math.ceil(allProtocol/10));				var dataArrar={};				dataArrar.page=page;				dataArrar.num=num;				dataArrar.type="1"				if($(".fenye").data("userId")!=="" && $(".fenye").data("userId")!=="undefined"){					dataArrar.userId = $(".fenye").data("userId");				}				if($(".fenye_customerName").text()!=="" && $(".fenye_customerName").text()!=="undefined"){					dataArrar.customerName = $(".fenye_customerName").text()				}				$.ajax({					type:"post",					url:url_path+"/getProtocol",					data:dataArrar,					dataType:"json",					success:function(data){						protocols_success(data);					},					error:function(){}				});			})			$(document).on("click",".navs-part",function(){				navToggle();				var dataArray={};				var userId = $(this).find(".terminalUserId").text();				if(userId!=="" && userId!=="undefined"){					dataArray.userId = userId;				}				var search_input3 = $(".search-input3").val();				var search_input33 = $(".search-input33").val();				if(search_input3!=="" && search_input33!==""){					dataArray.startTime = startDate(".search-input3");					dataArray.endTime =  startDate(".search-input33");				}				dataArray.type = "1";				dataArray.page=page;				dataArray.num=num;				console.log(dataArray)				$.ajax({
					type:"post",
					url:url_path+"/getProtocol",
					data:dataArray,					dataType:"json",					success:function(data){						protocols_success(data);						$(".fenye").data("userId",userId);					},					error:function(){}
				});			})			$(document).on("click",".navs-customerNum",function(){				var userId = $(this).data("userid2");				navToggle();				console.log(userId)				$.ajax({					type:"post",					url:url_path+"/getProtocol",					data:{						"userId":userId,						"type":"1",						"page":page,						"num":num					},					dataType:"json",					success:function(data){						protocols_success(data);						$(".fenye").data("userId",userId);					},					error:function(){}				});			})			$(".toggle").click(function(){				navToggle();			})
			$(document).on("click",".data-container-parts-userId",function(){				var userId = $(this).data("userid");				$.ajax({					type:"post",					url:url_path+"/getProtocol",					data:{						"userId":userId,						"type":"1",						"page":page,						"num":num					},					dataType:"json",					success:function(data){						protocols_success(data);						$(".fenye").data("userId",userId);					},					error:function(){}				});			})			$(document).on("click",".data-container-parts-customerName",function(){				var customerName = $(this).text();				$.ajax({					type:"post",					url:url_path+"/getProtocol",					data:{						"customerName":customerName,						"type":"1",						"page":page,						"num":num					},					dataType:"json",					success:function(data){						protocols_success(data);						$(".fenye_customerName").html(customerName);					},					error:function(){}				});			})			$(document).on("click",".search-input3",function(){				$(".users-shadow").fadeIn(500);				$(".users").fadeIn(500);			})			$(document).on("click",".user-part",function(){				$(".user-part").removeClass("user-part-active");				$(this).addClass("user-part-active");				var userId = $(this).data("userid");								$(".search-input3").val($(this).text());				$(".search-input3").attr("id",userId);				setTimeout(function(){					$(".users-shadow").fadeOut(500);					$(".users").fadeOut(500);				},500)							})			$(document).on("click",".search-btn",function(){				searchData();			});

			$(document).on("click",".lookUp",function(){
				var protocolId = $(this).parent().parent().find(".protocolId").text();				sessionStorage.setItem("protocolId",protocolId);				console.log(protocolId);				if(protocolId!=="" && protocolId!=="undefined"){					window.location.href="protocolsDetail.html"				}
			})			$(document).on("click",".lookUp2",function(){				var protocolId = $(this).parent().parent().find(".protocolId").text();				sessionStorage.setItem("protocolId",protocolId);				console.log(protocolId);				if(protocolId!=="" && protocolId!=="undefined"){					window.location.href="messageDetail.html"				}			})
						$(".search-btn3").click(function(){				var dataArray = {};				var search_input3 = $(".search-input3").val();				var search_input33 = $(".search-input33").val();				if(search_input3!=="" && search_input33!==""){					dataArray.startTime = startDate(".search-input3");					dataArray.endTime =  startDate(".search-input33");				}				dataArray.page=page;				dataArray.num=num;				$.ajax({					type:"post",					url:url_path+"/getTerminalUser",					data:dataArray,					dataType:"json",					success:function(data){						UsersSuccess(data);					},					error:function(){}				});			})
		})
	</script>
</html>
